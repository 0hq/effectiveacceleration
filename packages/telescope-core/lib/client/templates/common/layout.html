<template name="layout">
  {{#if appIsReady}}
    {{> css}}
    <div class="outer-wrapper {{currentPage}} {{navLayout}}">
      {{> mobile_nav}}
      <div class="inner-wrapper template-{{pageName}}">
        {{> header}}
        {{> modules zone="hero"}}
        <div class="content-wrapper">
          {{> messages}}
          {{#if notAllowed}}
            {{> Template.dynamic template=notAllowed.template data=notAllowed.data}}
          {{else}}
            {{> Template.dynamic template=adminMenu}}
            {{> modules zone="top"}}
            {{> Template.dynamic template=main}}
          {{/if}}
          {{> modules zone="footer"}}
        </div>
        <div class="overlay hidden"></div>
      </div>
      {{{extraCode}}}
    </div>
  {{else}}
    <div class="app-loading">{{> loading}}</div>
  {{/if}}
</template>
